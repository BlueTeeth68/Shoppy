@using Shoppy.SharedLibrary.Models.Responses.Products
@{
    ViewBag.Title = "Book detail";
    Layout = "_Layout";
    ViewBag.Active = 3;
    var product = (ProductDto)ViewBag.Product;
}

<!-- Shop Detail Start -->
<div class="container-fluid pb-5" id="product-detail">
    @* <button class="btn btn-primary" onclick="loadProductRatings(`@product.Id`, 1, 8)"> Click here</button> *@
    <div class="row px-xl-5">
        <div class="col-lg-5 mb-30">
            <div id="product-carousel" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner bg-light">
                    <div class="carousel-item active">
                        <img class="w-100 h-100" src=@(product.ProductThumbUrl ?? "~/img/product-1.jpg") alt="Image">
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-7 h-auto mb-30">
            <div class="h-100 bg-light p-30">
                <h3>@product.Name</h3>

                <div class="d-flex align-items-center justify-content-start mb-1">
                    @await Html.PartialAsync("~/Views/Partial/Rating/RatingStar.cshtml", product.AvgRate ?? 0)
                    
                    <span id="totalReview"></span>
                </div>
                <h3 class="font-weight-semi-bold mb-4">$@product.Price</h3>
                <div class="mb-3">
                    <p>
                        <strong class="text-dark mr-3">Author: </strong><span>@product.AuthorName</span>
                    </p>
                </div>
                <div class="mb-3">
                    <p>
                        <strong class="text-dark mr-3">Total page: </strong><span>@product.NumberOfPage</span>
                    </p>
                </div>

                <div class="mb-3">
                    <p>
                        <strong class="text-dark mr-3">Publisher: </strong><span>@product.Publisher</span>
                    </p>
                </div>
                <div class="d-flex align-items-center mb-4 pt-2">
                    @* <div class="input-group quantity mr-3" style="width: 130px;"> *@
                    @*     <div class="input-group-btn"> *@
                    @*         <button class="btn btn-primary btn-minus"> *@
                    @*             <i class="fa fa-minus"></i> *@
                    @*         </button> *@
                    @*     </div> *@
                    @*     <input type="text" class="form-control bg-secondary border-0 text-center" value="1"> *@
                    @*     <div class="input-group-btn"> *@
                    @*         <button class="btn btn-primary btn-plus"> *@
                    @*             <i class="fa fa-plus"></i> *@
                    @*         </button> *@
                    @*     </div> *@
                    @* </div> *@
                    <button class="btn btn-primary px-3" onclick="addToCart(event, '@product.Id')">
                        <i class="fa fa-shopping-cart mr-1"></i> Add To
                        Cart
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="row px-xl-5">
        <div class="col">
            <div class="bg-light p-30">
                <div class="nav nav-tabs mb-4">
                    <a class="nav-item nav-link text-dark active" data-toggle="tab" href="#tab-pane-1">Description</a>
                    <a class="nav-item nav-link text-dark" id="review" data-toggle="tab" href="#tab-pane-3">Reviews (0)</a>
                </div>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="tab-pane-1">
                        <h4 class="mb-3">Product Description</h4>
                        <p>@product.Description</p>
                    </div>

                    @* load data hear *@

                    <div class="tab-pane fade" id="tab-pane-3">
                        <div id="product-ratings"></div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- Shop Detail End -->


<script>
    debugger
    $(window).on('load', function() {
        loadProductRatings(`@product.Id`, 1, 8);
    });

</script>